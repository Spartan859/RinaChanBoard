#include<bits/stdc++.h>
#define rep(I,a,b) for(int I=(a);I<=(b);I++)
#define dwn(I,a,b) for(int I=(a);I>=(b);I--)
#define ll long long
using namespace std;

int row_tbl[16][24] = {
    {7, 6, 5, 4, 3, 2, 1, 0,/**/7, 6, 5, 4, 3, 2, 1, 0,/**/7, 6, 5, 4, 3, 2, 1, 0},
    {7, 6, 5, 4, 3, 2, 1, 0,/**/7, 6, 5, 4, 3, 2, 1, 0,/**/7, 6, 5, 4, 3, 2, 1, 0},
    {7, 6, 5, 4, 3, 2, 1, 0,/**/7, 6, 5, 4, 3, 2, 1, 0,/**/7, 6, 5, 4, 3, 2, 1, 0},
    {7, 6, 5, 4, 3, 2, 1, 0,/**/7, 6, 5, 4, 3, 2, 1, 0,/**/7, 6, 5, 4, 3, 2, 1, 0},
    {7, 6, 5, 4, 3, 2, 1, 0,/**/7, 6, 5, 4, 3, 2, 1, 0,/**/7, 6, 5, 4, 3, 2, 1, 0},
    {7, 6, 5, 4, 3, 2, 1, 0,/**/7, 6, 5, 4, 3, 2, 1, 0,/**/7, 6, 5, 4, 3, 2, 1, 0},
    {7, 6, 5, 4, 3, 2, 1, 0,/**/7, 6, 5, 4, 3, 2, 1, 0,/**/7, 6, 5, 4, 3, 2, 1, 0},
    {7, 6, 5, 4, 3, 2, 1, 0,/**/7, 6, 5, 4, 3, 2, 1, 0,/**/7, 6, 5, 4, 3, 2, 1, 0},
    ///////////////////////////////////////////////////////////////////////////////
    {7, 6, 5, 4, 3, 2, 1, 0,/**/7, 6, 5, 4, 3, 2, 1, 0,/**/7, 6, 5, 4, 3, 2, 1, 0},
    {7, 6, 5, 4, 3, 2, 1, 0,/**/7, 6, 5, 4, 3, 2, 1, 0,/**/7, 6, 5, 4, 3, 2, 1, 0},
    {7, 6, 5, 4, 3, 2, 1, 0,/**/7, 6, 5, 4, 3, 2, 1, 0,/**/7, 6, 5, 4, 3, 2, 1, 0},
    {7, 6, 5, 4, 3, 2, 1, 0,/**/7, 6, 5, 4, 3, 2, 1, 0,/**/7, 6, 5, 4, 3, 2, 1, 0},
    {7, 6, 5, 4, 3, 2, 1, 0,/**/7, 6, 5, 4, 3, 2, 1, 0,/**/7, 6, 5, 4, 3, 2, 1, 0},
    {7, 6, 5, 4, 3, 2, 1, 0,/**/7, 6, 5, 4, 3, 2, 1, 0,/**/7, 6, 5, 4, 3, 2, 1, 0},
    {7, 6, 5, 4, 3, 2, 1, 0,/**/7, 6, 5, 4, 3, 2, 1, 0,/**/7, 6, 5, 4, 3, 2, 1, 0},
    {7, 6, 5, 4, 3, 2, 1, 0,/**/7, 6, 5, 4, 3, 2, 1, 0,/**/7, 6, 5, 4, 3, 2, 1, 0}};
    
int col_tbl[16][24] = {
    {1, 1, 1, 1, 1, 1, 1, 1,/**/1, 1, 1, 1, 1, 1, 1, 1,/**/0, 0, 0, 0, 0, 0, 0, 0},
    {2, 2, 2, 2, 2, 2, 2, 2,/**/2, 2, 2, 2, 2, 2, 2, 2,/**/7, 7, 7, 7, 7, 7, 7, 7},
    {3, 3, 3, 3, 3, 3, 3, 3,/**/3, 3, 3, 3, 3, 3, 3, 3,/**/6, 6, 6, 6, 6, 6, 6, 6},
    {4, 4, 4, 4, 4, 4, 4, 4,/**/4, 4, 4, 4, 4, 4, 4, 4,/**/5, 5, 5, 5, 5, 5, 5, 5},
    {5, 5, 5, 5, 5, 5, 5, 5,/**/5, 5, 5, 5, 5, 5, 5, 5,/**/4, 4, 4, 4, 4, 4, 4, 4},
    {6, 6, 6, 6, 6, 6, 6, 6,/**/6, 6, 6, 6, 6, 6, 6, 6,/**/3, 3, 3, 3, 3, 3, 3, 3},
    {7, 7, 7, 7, 7, 7, 7, 7,/**/7, 7, 7, 7, 7, 7, 7, 7,/**/2, 2, 2, 2, 2, 2, 2, 2},
    {0, 0, 0, 0, 0, 0, 0, 0,/**/0, 0, 0, 0, 0, 0, 0, 0,/**/1, 1, 1, 1, 1, 1, 1, 1},
    ///////////////////////////////////////////////////////////////////////////////
    {1, 1, 1, 1, 1, 1, 1, 1,/**/1, 1, 1, 1, 1, 1, 1, 1,/**/1, 1, 1, 1, 1, 1, 1, 1},
    {2, 2, 2, 2, 2, 2, 2, 2,/**/2, 2, 2, 2, 2, 2, 2, 2,/**/2, 2, 2, 2, 2, 2, 2, 2},
    {3, 3, 3, 3, 3, 3, 3, 3,/**/3, 3, 3, 3, 3, 3, 3, 3,/**/3, 3, 3, 3, 3, 3, 3, 3},
    {4, 4, 4, 4, 4, 4, 4, 4,/**/4, 4, 4, 4, 4, 4, 4, 4,/**/4, 4, 4, 4, 4, 4, 4, 4},
    {5, 5, 5, 5, 5, 5, 5, 5,/**/5, 5, 5, 5, 5, 5, 5, 5,/**/5, 5, 5, 5, 5, 5, 5, 5},
    {6, 6, 6, 6, 6, 6, 6, 6,/**/6, 6, 6, 6, 6, 6, 6, 6,/**/6, 6, 6, 6, 6, 6, 6, 6},
    {7, 7, 7, 7, 7, 7, 7, 7,/**/7, 7, 7, 7, 7, 7, 7, 7,/**/7, 7, 7, 7, 7, 7, 7, 7},
    {0, 0, 0, 0, 0, 0, 0, 0,/**/0, 0, 0, 0, 0, 0, 0, 0,/**/0, 0, 0, 0, 0, 0, 0, 0}};
int st[6][2]={{0,0},{0,8},{0,16},{8,0},{8,8},{8,16}};
void outputrow(){
	cout<<"row:"<<endl;
	cout<<'{';
	for(int i=0;i<16;i++){
		cout<<'{'; 
		for(int j=0;j<24;j++){
			cout<<row_tbl[i][j];
			if(j!=23) cout<<", ";
		}
		cout<<"}";
		if(i!=15) cout<<","<<endl; 
	}
	cout<<"};"<<endl;
}
void outputcol(){
	cout<<"col:"<<endl;
	cout<<'{';
	for(int i=0;i<16;i++){
		cout<<'{'; 
		for(int j=0;j<24;j++){
			cout<<col_tbl[i][j];
			if(j!=23) cout<<", ";
		}
		cout<<"}";
		if(i!=15) cout<<","<<endl; 
	}
	cout<<"};"<<endl;
}
int main(){
	ios::sync_with_stdio(false);
	freopen("input.txt","r",stdin);
	
	for(int i=0;i<16;i++)
		for(int j=0;j<24;j++){
			scanf("%d",row_tbl[i]+j);
		}
	for(int i=0;i<16;i++)
		for(int j=0;j<24;j++){
			scanf("%d",col_tbl[i]+j);
		}
	freopen("CON","r",stdin);
	freopen("output.txt","w",stdout);
	string s;int id;
	while(cin>>s>>id){
		if(s=="fr"){
			for(int i=st[id][0];i<st[id][0]+8;i++){
				for(int j=st[id][1],k=st[id][1]+7;j<k;j++,k--){
					swap(row_tbl[i][j],row_tbl[i][k]);
				}
			}
			outputrow();
		}
		if(s=="fc"){
			for(int i=st[id][1];i<st[id][1]+8;i++){
				for(int j=st[id][0],k=st[id][0]+7;j<k;j++,k--){
					swap(col_tbl[j][i],col_tbl[k][i]);
				}
			}
			outputcol();
		}
		if(s=="sw"){
			for(int i=st[id][0];i<st[id][0]+8;i++){
				for(int j=st[id][1];j<st[id][1]+8;j++){
					swap(row_tbl[i][j],col_tbl[i][j]);
				}
			}
			outputrow();
			outputcol();
		}
	}
	freopen("input.txt","w",stdout);
	for(int i=0;i<16;i++){
		for(int j=0;j<24;j++){
			cout<<row_tbl[i][j]<<' ';
		}
		cout<<endl;
	}
	for(int i=0;i<16;i++){
		for(int j=0;j<24;j++){
			cout<<col_tbl[i][j]<<' ';
		}
		cout<<endl;
	}
	return 0;
}

